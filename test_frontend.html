<!DOCTYPE html>
<html>

<head>
    <title>Test API</title>
</head>

<body>
    <h1>Test Generate Plan API</h1>
    <button id="testBtn">Test API Call</button>
    <pre id="result"></pre>

    <script>
        document.getElementById('testBtn').addEventListener('click', async () => {
            const resultEl = document.getElementById('result');
            resultEl.textContent = 'Loading...';

            try {
                const response = await fetch('http://localhost:8000/generate-plan', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ tasks: 'write a report', energy_level: 'medium' })
                });

                resultEl.textContent = `Status: ${response.status}\n`;
                resultEl.textContent += `Content-Type: ${response.headers.get('content-type')}\n\n`;

                const text = await response.text();
                resultEl.textContent += `Response:\n${text}`;

                // Try to parse as JSON
                try {
                    const json = JSON.parse(text);
                    resultEl.textContent += `\n\nParsed JSON:\n${JSON.stringify(json, null, 2)}`;
                } catch (e) {
                    resultEl.textContent += `\n\nJSON Parse Error: ${e.message}`;
                }
            } catch (e) {
                resultEl.textContent = `Error: ${e.message}\n${e.stack}`;
            }
        });
    </script>
</body>

</html>